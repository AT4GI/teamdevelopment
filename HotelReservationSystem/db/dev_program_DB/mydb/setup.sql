/* Copyright(C) 2007 National Institute of Informatics, All rights reserved. */

DROP TABLE PAYMENT IF EXISTS;
DROP TABLE AVAILABLEQTY IF EXISTS;
DROP TABLE RESERVATION IF EXISTS;
DROP TABLE ROOM IF EXISTS;

-- 部屋テーブル: 部屋番号、種類、料金を管理
CREATE TABLE ROOM(
    ROOMNUMBER VARCHAR(50) NOT NULL PRIMARY KEY,
    ROOM_TYPE VARCHAR(20), -- SINGLE, DOUBLE, SUITE
    PRICE INTEGER,
    STAYINGDATE VARCHAR(20) -- 予約されている場合、チェックイン日が入る
);

-- 予約テーブル: 予約番号、宿泊期間、部屋の種類を管理
CREATE TABLE RESERVATION(
    RESERVATIONNUMBER VARCHAR(50) NOT NULL PRIMARY KEY,
    CHECKIN_DATE VARCHAR(20),
    CHECKOUT_DATE VARCHAR(20),
    ROOM_TYPE VARCHAR(20),
    STATUS VARCHAR(10)
);

-- 日付・部屋種別の空室数テーブル
CREATE TABLE AVAILABLEQTY(
    STAY_DATE VARCHAR(20) NOT NULL,
    ROOM_TYPE VARCHAR(20) NOT NULL,
    QTY INTEGER,
    PRIMARY KEY(STAY_DATE, ROOM_TYPE)
);

-- 支払いテーブル (変更なし)
CREATE TABLE PAYMENT(
    ROOMNUMBER VARCHAR(50) NOT NULL,
    STAYINGDATE VARCHAR(20) NOT NULL,
    AMOUNT INTEGER,
    STATUS VARCHAR(10),
    CONSTRAINT ROOMNUMBER_STAYINGDATE PRIMARY KEY(ROOMNUMBER,STAYINGDATE)
);

-- 初期データ: シングル3部屋、ダブル2部屋、スイート1部屋を登録
INSERT INTO ROOM VALUES('101','SINGLE', 8000, NULL);
INSERT INTO ROOM VALUES('102','SINGLE', 8000, NULL);
INSERT INTO ROOM VALUES('103','SINGLE', 8000, NULL);
INSERT INTO ROOM VALUES('201','DOUBLE', 15000, NULL);
INSERT INTO ROOM VALUES('202','DOUBLE', 15000, NULL);
INSERT INTO ROOM VALUES('301','SUITE', 30000, NULL);




-- 365日分の空室データを直接INSERT（2025/07/23～2026/07/22）
INSERT INTO AVAILABLEQTY VALUES('2025/07/23', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/23', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/23', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/24', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/24', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/24', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/25', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/25', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/25', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/26', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/26', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/26', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/27', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/27', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/27', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/28', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/28', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/28', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/29', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/29', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/29', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/30', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/30', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/30', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/07/31', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/07/31', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/07/31', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/01', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/01', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/01', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/02', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/02', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/02', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/03', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/03', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/03', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/04', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/04', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/04', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/05', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/05', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/05', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/06', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/06', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/06', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/07', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/07', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/07', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/08', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/08', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/08', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/09', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/09', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/09', 'SUITE', 1);
INSERT INTO AVAILABLEQTY VALUES('2025/08/10', 'SINGLE', 3);
INSERT INTO AVAILABLEQTY VALUES('2025/08/10', 'DOUBLE', 2);
INSERT INTO AVAILABLEQTY VALUES('2025/08/10', 'SUITE', 1);
-- ...（この形式で2026/07/22まで続く）...